<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="keywords" content="EPICS, EPICSv4">
  <!-- Include the epicsv4 base.css, and the css for epics v4 documents -->
  <link rel="stylesheet" type="text/css" href="http://epics-pvdata.sourceforge.net/base.css" /> 
  <link rel="stylesheet" type="text/css" href="http://epics-pvdata.sourceforge.net/epicsv4.css" />
  <title>MASAR Installation</title>
  
  <style type="text/css">
/*<![CDATA[*/


/*]]>*/</style></head><body>
<div class="head">
<h1>MASAR INSTALLATION<br>
</h1>
<!-- Maturity: Working Draft or Request for Comments, or Recommendation, and date. -->
<h2 class="nocount">MASAR Installation, Editors Draft, 29-Feb-2012</h2>
<dl>
  <dt>This version:</dt>
  <dd><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/masarService/raw-file/tip/documentation/installation.html">installation_20120229.html</a></dd>
  <dt>Latest version:</dt>
  <dd><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/masarService/raw-file/tip/documentation/installation.html">installation.html</a></dd>
  <dt>Editors:</dt>
  <dd>Guobao Shen, BNL<br>
Marty Kraimer, BNL<span style="font-weight: bold;"></span></dd>
</dl>
<dl>
</dl>
<hr>
</div>

<!-- Header material -->
<h2 class="nocount" id="abstract">Abstract</h2>

<p>MASAR (MAchine Snapshot, Archiving, and Retrieve) is a service which
is
implemented under EPICS V4 framework. It consists of server part and
client
part that both are implemented in C++/Python. The server part is
responsible to
take machine snapshot, archive data in relational database, and
retrieve data
back to client. The client part provides a default GUI to retrieve
data,
compare data with live machine, and restore machine using snapshot
data. A
Python interface for scripting user. This document describes how to
start to
use MASAR service. It's a step by step guide to downloading the
appropriate
EPICS V4 products and associated software, and compiling and installing
MASAR
service, and running MASAR server and client. </p>

<h2 class="nocount" id="status">Status of this Document</h2>

<p>This is the 29-Feb-2012 version of the MASAR Installation. </p>

<h2>Introduction</h2>

<p>MASAR is implemented in C++/Python, which is using channelRPC
mechanism to
network communication. Current implementation is using SQLite3 as
underneath
RDB, and a Python module so-called PYMASAR is developed to access
SQLite3
database. The channelRPC server is implemented in C++, therefore,
Python/C is
used to map the data between C++ domain and Python domain. A Python API
is provided for client user, and a default PyQt4 GUI is developed for
end user.</p>

<p>For now the only way to obtain the masarService is from the
sourceforge mercurial repository. No binary package is provided at
current stage.<br>
</p>

<p>Currently, MASAR has been installed on the following systems:</p>

<ul>

  <li>Ubuntu 11.04 (Natty Narwhal)<br>
  </li>
  <li>Debian 7.0 (Wheezy)</li>
  <li>Fedora 14</li>
  <li>Fedora 16</li>
  <li>Mac OS-X 10.6.8 (Snow Leopard)<br>
  </li>
</ul>

<h2>Required modules<br>
</h2>

<p>The following packages are needed to successfully compile MASAR on
your machine.</p>

<p>System packages:</p>

<ul>
  <li>Python-dev 2.7 or above</li>
</ul>
<p>The following packages are needed to run MASAR on
your machine.</p>
<ul>
  <li>Python 2.7 or above</li>
  <li>SQLite3 3.7 or above</li>
  <li>PyQt4 4.8 or above</li>
</ul>

<p>EPICS modules:<br>
</p>

<ul>

  <li>EPICS V3 base R3.14.11 or above. Current release is R3.14.2,
which can be downloaded from <a href="http://www.aps.anl.gov/epics/base/R3-14/12.php">here</a>.<br>
  </li>
  <li><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/">EPICS
V4</a> (managed by mercurial on source forge)<br>
  </li>
  <ul>
    <li><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/pvDataCPP/raw-file/tip/documentation/pvDataCPP.html">pvDataCPP</a>,
which can be checked out from sourceforge mercurial repo as below<br>
    </li>
    <li><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/pvAccessCPP/raw-file/tip/documentation/pvAccessCPP.html">pvAccessCPP</a>
    </li>
    <li><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/pvIOCCPP/raw-file/tip/documentation/pvIOCCPP.html">pIOCCPP</a></li>
    <li><a href="http://epics-pvdata.sourceforge.net/alpha/normativeTypes/normativeTypes.html">normativeTypes</a><br>
The normative types implementation is under alpha version, which is
under alphaCPP module.</li>
    <li><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/masarService/raw-file/tip/documentation/getstarting.html">MASAR</a>
module itself is part os EPICS V4.<br>
    </li>
  </ul>
</ul>

<ul>

</ul>

<p>All EPICS V4 modules can be checked out from its mercurial repository
on source forge. If there is an error such like "abort: error:
Connection refused"
when checking out modules from mercurial repository, it probably means
that you have some problems with your network setting, for example http
proxy setting.<br>
</p>

<h2>EPICS V4 Modules Installation</h2>

The development packages for Python 2.7.x, and EPICS V3 should have
been installed already. EPICS V3 base is available as a Debian package
from <a href="http://epics.nsls2.bnl.gov/debian/">NSLS-II Debian
package server</a>. Here we assume EPICS V3 base is installed under <span style="color: rgb(0, 153, 0);">/usr/lib/epics</span>.<br>

<br>

A step-by-step installation is introduced here, and the example is to
show how to install whole packages on Ubuntu 11.04 x86_64 system. You
should be able to install all modules on other systems following the
same procedure.<br>

You can check your system architecture using for example on linux
"uname -m".
<pre>$ uname -m<br>x86_64<br></pre>

<ol>

  <li>Preparation<br>
Here we assume you want to install all modules under ~/V4<br>
    <pre>$ cd<br>$ mkdir V4<br>$ cd V4<br>$ hg clone http://epics-pvdata.hg.sourceforge.net/hgroot/epics-pvdata/pvDataCPP<br>$ hg clone http://epics-pvdata.hg.sourceforge.net/hgroot/epics-pvdata/pvAccessCPP<br>$ hg clone http://epics-pvdata.hg.sourceforge.net/hgroot/epics-pvdata/pvIOCCPP<br>$ hg clone http://epics-pvdata.hg.sourceforge.net/hgroot/epics-pvdata/alphaCPP<br><br>$ hg clone http://epics-pvdata.hg.sourceforge.net/hgroot/epics-pvdata/masarService</pre>
NOTE: Make sure you have following line in each module in
configure/RELEASE. Suggest to put it as the last line if it is not.
    <pre>-include $(TOP)/configure/RELEASE.local</pre>
  </li>
  <li>Install pvDataCPP
    <pre>$ cd pvDataCPP<br></pre>
Add the following to configure/RELEASE.local
    <pre>EPICS_BASE=/usr/lib/epics<br></pre>
Then
    <pre>$ make<br></pre>
  </li>
  <li>Install pvAccessCPP
    <pre>$ cd ../pvAccessCPP<br></pre>
Add the following to configure/RELEASE.local
    <pre>PVDATA=~/V4/pvDataCPP<br>EPICS_BASE=/usr/lib/epics<br></pre>
Then
    <pre>$ make</pre>
  </li>
  <li>Install pvIOCCPP
    <pre>$ cd ../pvIOCCPP<br></pre>
Add the following to configure/RELEASE.local
    <pre>PVDATA=~/V4/pvDataCPP<br>PVACCESS=~/V4/pvAccessCPP<br>EPICS_BASE=/usr/lib/epics<br></pre>
Then
    <pre>$ make</pre>
  </li>
  <li>Install normativeTypes
    <pre>$ cd ../alphaCPP/normativeTypes/<br></pre>
Add the following to configure/RELEASE.local
    <pre>PVDATA=~/V4/pvDataCPP<br>PVACCESS=~/V4/pvAccessCPP<br>EPICS_BASE=/usr/lib/epics<br></pre>
Then
    <pre>$ make</pre>
  </li>
  <li>Install normativeTypes
    <pre>$ cd ../alphaCPP/normativeTypes/<br></pre>
Add the following to configure/RELEASE.local
    <pre>PVDATA=~/V4/pvDataCPP<br>PVACCESS=~/V4/pvAccessCPP<br>EPICS_BASE=/usr/lib/epics<br></pre>
Then
    <pre>$ make</pre>
  </li>
  <li>Install masarService
    <pre>$ cd ../../masarService/cpp<br></pre>
Add the following to configure/RELEASE.local
    <pre>PYTHON=python2.7<br>PYTHON_BASE=/usr<br>$(PYTHON)_DIR = $(PYTHON_BASE)/lib/$(PYTHON)/config <br>NUMPY_CORE=${PYTHON_BASE}/lib/${PYTHON}/site-packages/numpy/core<br><br>PVDATA=~/V4/pvDataCPP<br>PVACCESS=~/V4/pvAccessCPP<br>PVIOC=~/V4/pvIOCCPP<br>NTTYPE=~/V4/alphaCPP/normativeTypes<br><br>EPICS_BASE=/usr/lib/epics<br></pre>
Then
    <pre>$ make</pre>
  </li>
</ol>

Now the whole installation procedure has been finished if it ends without any error. <br>

Please refer the MASAR get starting for a quick or user manual for all details.<br>

<dl>

</dl>

<hr>
<address> Guobao Shen, BNL</address>

<!-- hhmts start -->
Last modified: Wed Feb 29 17:57:46 EST 2012<!-- hhmts end -->
<hr>
</body></html>